# Exploration des indicateurs


## Introduction

L‚Äôobjectif de ce chapitre est de comparer les dynamiques environnementales entre les quatre pays √©tudi√©s ‚Äî **S√©n√©gal**, **Burkina Faso**, **Mali** et **Niger** ‚Äî √† partir d‚Äôune s√©lection d‚Äô**indicateurs spectraux homog√®nes**, calcul√©s sur l‚Äôensemble du territoire national de chaque pays √† l‚Äô√©chelle r√©gionale.

Contrairement aux chapitres pr√©c√©dents qui abordaient chaque pays individuellement, l‚Äôapproche ici est **transversale** : elle vise √† identifier les **points communs**, les **disparit√©s**, et les **profils √©cologiques contrast√©s** √† travers l‚Äôespace sah√©lien ouest-africain.

Nous nous focalisons sur trois dimensions fondamentales :

- **La vigueur de la v√©g√©tation** √† travers l‚Äôindice **NDVI** (Normalized Difference Vegetation Index), indicateur standard de la couverture v√©g√©tale active ;
- **Le stress ou la d√©gradation √©cologique** via le **BAI** (Burned Area Index), utilis√© comme proxy de la perturbation de surface (sols nus, v√©g√©tation appauvrie, zones br√ªl√©es) ;
- **L‚Äôhumidit√© r√©siduelle des surfaces** √† travers l‚Äôindice **WI2** (Water Index 2), mesurant la pr√©sence d‚Äôeau ou d‚Äôhumidit√© dans le sol et la v√©g√©tation.

Pour chaque indicateur, nous pr√©sentons :

- Des **cartes par pays**,
- Un **graphique comparatif** des moyennes nationales,
- Un **tableau r√©gional d√©taill√©** des valeurs.

Cette d√©marche permet d'√©tablir un **diagnostic spatial compar√©**, et d‚Äôalimenter une r√©flexion plus large sur la r√©silience √©cologique, les pressions climatiques et les marges d‚Äôaction pour une gestion durable des ressources naturelles √† l‚Äô√©chelle r√©gionale.


```{r raster-functions-compar, include=FALSE}
library(raster)
library(sf)
library(leaflet)
library(exactextractr)
library(dplyr)
library(tmap)   
library(ggplot2)
library(DT)


# Fonction g√©n√©rique pour tout pays et tout indicateur
render_indicator_raster <- function(indicator_name, country, palette = "viridis", extension = ".tif") {
  raster_path <- paste0("data/", indicator_name, "/", indicator_name, "_", tolower(country), extension)

  if (!file.exists(raster_path)) {
    stop("‚ùå Fichier raster introuvable : ", raster_path)
  }

  rast <- raster(raster_path)

  static_map <- tm_shape(rast) +
    tm_raster(style = "quantile", palette = palette, title = toupper(indicator_name)) +
    tm_layout(main.title = paste0(toupper(indicator_name), " ‚Äì ", tools::toTitleCase(country), " (2024)"),
              legend.outside = TRUE)

  pal_fun <- colorNumeric(palette = palette, domain = values(rast), na.color = "transparent")
  interactive_map <- leaflet() %>%
    addProviderTiles("CartoDB.Positron") %>%
    addRasterImage(rast, colors = pal_fun, opacity = 0.8) %>%
    addLegend(pal = pal_fun, values = values(rast), title = indicator_name, position = "bottomright")

  list(static = static_map, interactive = interactive_map, raster = rast)
}

plot_country_map <- function(indicator, country, palette = "YlGn", shape_path, region_id = "ADM1_FR") {
  raster_out <- render_indicator_raster(indicator_name = indicator, country = country, palette = palette)
  
  plot_raster_aggregated_leaflet(
    raster_obj = raster_out$raster,
    shapefile_path = shape_path,
    palette = palette,
    region_id = region_id,
    title = paste(toupper(indicator), "-", tools::toTitleCase(country), "2024")
  )
}
plot_raster_aggregated_leaflet <- function(raster_obj, shapefile_path, palette = "YlGn", region_id = "ADM1_FR", title = "Carte") {
  regions <- st_read(shapefile_path, quiet = TRUE)
  mean_vals <- exact_extract(raster_obj, regions, 'mean')
  regions$mean_value <- round(mean_vals, 3)
  region_names <- regions[[region_id]]

  pal <- colorNumeric(palette = palette, domain = mean_vals, na.color = "transparent")

  leaflet(regions) %>%
    addProviderTiles("CartoDB.Positron") %>%
    addPolygons(
      fillColor = ~pal(mean_value),
      color = "#444", weight = 1, fillOpacity = 0.7,
      label = paste0(region_names, ": ", mean_vals),
      popup = paste("<b>R√©gion :</b>", region_names, "<br><b>Valeur moyenne :</b>", mean_vals)
    ) %>%
    addLegend(pal = pal, values = mean_vals, title = title, position = "bottomright") %>%
    addControl(
      html = paste0("<div style='background:white;padding:6px 12px;border-radius:6px;
                     box-shadow:0 0 5px rgba(0,0,0,0.3);
                     font-size:16px;font-weight:bold'>", title, "</div>"),
      position = "topright"
    )
}

```
```{r echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      
get_indicator_data <- function(indicator, country, raster_path, shapefile_path, region_id = "ADM1_FR", scale = FALSE) {
  rast <- raster(raster_path)
  regions <- st_read(shapefile_path, quiet = TRUE)
  vals <- exact_extract(rast, regions, 'mean')
  if (scale) vals <- vals / 10000
  
  tibble(
    Pays = country,
    R√©gion = regions[[region_id]],
    Indicateur = toupper(indicator),
    Valeur = round(vals, 4)
  )
}


```

```{r echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
indicator_config <- list(
  ndvi = list(
    scale = TRUE,
    countries = list(
      list(pays = "S√©n√©gal",       raster = "data/ndvi/ndvi_senegal.tif",       shapefile = "data/shapes/regions_senegal.shp"),
      list(pays = "Burkina Faso",  raster = "data/ndvi/ndvi_burkina.tif",       shapefile = "data/shapes/regions_burkina.shp"),
      list(pays = "Mali",          raster = "data/ndvi/ndvi_mali.tif",          shapefile = "data/shapes/regions_mali.shp"),
      list(pays = "Niger",         raster = "data/ndvi/ndvi_niger.tif",         shapefile = "data/shapes/regions_niger.shp")
    )
  ),
  bai = list(
    scale = TRUE,
    countries = list(
      list(pays = "S√©n√©gal",       raster = "data/bai/bai_senegal.tif",         shapefile = "data/shapes/regions_senegal.shp"),
      list(pays = "Burkina Faso",  raster = "data/bai/bai_burkina.tif",         shapefile = "data/shapes/regions_burkina.shp"),
      list(pays = "Mali",          raster = "data/bai/bai_mali.tif",            shapefile = "data/shapes/regions_mali.shp"),
      list(pays = "Niger",         raster = "data/bai/bai_niger.tif",           shapefile = "data/shapes/regions_niger.shp")
    )
  ),
  wi2 = list(
    scale = FALSE,
    countries = list(
      list(pays = "S√©n√©gal",       raster = "data/wi2/wi2_senegal.tif",         shapefile = "data/shapes/regions_senegal.shp"),
      list(pays = "Burkina Faso",  raster = "data/wi2/wi2_burkina.tif",         shapefile = "data/shapes/regions_burkina.shp"),
      list(pays = "Mali",          raster = "data/wi2/wi2_mali.tif",            shapefile = "data/shapes/regions_mali.shp"),
      list(pays = "Niger",         raster = "data/wi2/wi2_niger.tif",           shapefile = "data/shapes/regions_niger.shp")
    )
  )
)


```

```{r setup, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
all_indicators_data <- list()

for (ind_name in names(indicator_config)) {
  conf <- indicator_config[[ind_name]]
  message("Traitement de : ", ind_name)
  
  for (pays_info in conf$countries) {
    df <- get_indicator_data(
      indicator = ind_name,
      country = pays_info$pays,
      raster_path = pays_info$raster,
      shapefile_path = pays_info$shapefile,
      scale = conf$scale
    )
    
    all_indicators_data[[length(all_indicators_data) + 1]] <- df
  }
}

df_global <- bind_rows(all_indicators_data)

```
---

## Passons √† l'exploration 


Pour proc√©der √† l'exploration vous pouvez consulter l'application directement ci-dessous (format HTML uniquement) :

<iframe src="https://ahmedniass.shinyapps.io/Comparaison/"
        width="100%" height="600" frameborder="0"
        style="border:1px solid #ccc; border-radius: 8px;">
</iframe>

## Comparaison de la couverture v√©g√©tale 

L‚Äôindice NDVI (Normalized Difference Vegetation Index) est un indicateur standard de la densit√© de la v√©g√©tation verte active. Il permet d‚Äôobserver les zones √† fort potentiel de biomasse ainsi que les zones d√©grad√©es. Dans ce cadre comparatif, nous utilisons le NDVI pour analyser les diff√©rences de couverture v√©g√©tale entre les pays sah√©liens.



### Tableau des valeurs r√©gionales NDVI
```{r ndvi-table, echo=FALSE}
df_global %>%
  filter(Indicateur == "NDVI") %>%
  datatable(
    filter = "top",
    options = list(
      pageLength = 10,
      dom = 't<"bottom"ip>',
      className = "stripe hover cell-border order-column",
      autoWidth = TRUE
    ),
    rownames = FALSE,
    colnames = c("Pays", "R√©gion", "Indicateur", "Valeur")
  ) %>%
  formatStyle(
    "Valeur",
    background = styleColorBar(range(df_global$Valeur, na.rm = TRUE), "lightgreen"),
    backgroundSize = "80% 60%",
    backgroundRepeat = "no-repeat",
    backgroundPosition = "center"
  )
```


###  Analyse comparative 

Le **NDVI (Normalized Difference Vegetation Index)** est un indicateur de r√©f√©rence pour estimer la **densit√© de v√©g√©tation active** √† la surface terrestre. Calcul√© √† partir des bandes rouge et proche infrarouge des satellites, il permet de quantifier la **vigueur photosynth√©tique des plantes**. Plus la valeur est √©lev√©e, plus la couverture v√©g√©tale est dense, verte et en bonne sant√©.

---

#### Lecture interne (intra-pays)

Dans chacun des pays sah√©liens √©tudi√©s (üá∏üá≥ S√©n√©gal, üáßüá´ Burkina Faso, üá≤üá± Mali, üá≥üá™ Niger), on observe un **gradient √©cologique du nord vers le sud** :

- **Au nord** : zones sah√©liennes, plus s√®ches, avec une v√©g√©tation clairsem√©e voire absente.
- **Au sud** : zones soudaniennes ou guin√©ennes, plus humides, avec for√™ts, savanes denses et cultures.

Cette dynamique se v√©rifie dans chaque territoire :

- **S√©n√©gal** : NDVI √©lev√© au sud (Ziguinchor, S√©dhiou, Kolda), plus faible au nord (Matam, Saint-Louis).
- **Mali** : v√©g√©tation dense au sud (Sikasso), quasi absente au nord (Kidal, Tombouctou).
- **Burkina Faso** : valeurs plus √©lev√©es dans le Sud-Ouest et les Cascades, plus faibles dans le Sahel burkinab√®.
- **Niger** : contraste extr√™me entre les r√©gions m√©ridionales (Maradi, Dosso) et les √©tendues d√©sertiques du nord (Agadez).

>**Conclusion intra-pays** : dans chacun des pays √©tudi√©s, **la v√©g√©tation devient plus abondante et plus vigoureuse √† mesure qu‚Äôon se dirige vers le sud**, conform√©ment √† la distribution des pr√©cipitations et des biomes.

---

#### Lecture externe (inter-pays)

Le graphique comparatif inter-pays r√©v√®le des √©carts significatifs :

- **S√©n√©gal** : NDVI moyen le plus √©lev√©, en raison de la forte v√©g√©tation au sud-ouest (for√™ts galeries, bolongs, agriculture pluviale).
- **Burkina Faso** : NDVI stable, refl√©tant un territoire √©cologiquement diversifi√©, bien que soumis √† des pressions croissantes.
- **Mali** : NDVI interm√©diaire, marqu√© par une h√©t√©rog√©n√©it√© importante entre le sud et les zones d√©sertiques.
- **Niger** : NDVI le plus faible, t√©moignant d‚Äôun territoire tr√®s aride avec une v√©g√©tation clairsem√©e, voire inexistante dans certaines r√©gions.

 Le **S√©n√©gal** et le **Burkina Faso** apparaissent comme les pays les plus v√©g√©talis√©s en moyenne, tandis que le **Niger reste le plus vuln√©rable √† la d√©sertification**.


---

## Comparaison du stress √©cologique 

L‚Äôindice BAI (Burned Area Index) est con√ßu pour d√©tecter les zones br√ªl√©es ou fortement d√©grad√©es, en mettant en √©vidence les sols sombres, nus ou perturb√©s. Bien qu‚Äôinitialement utilis√© pour cartographier les feux de v√©g√©tation, le BAI est aussi un indicateur pertinent du stress √©cologique dans les environnements sah√©liens, o√π il r√©v√®le les zones de d√©forestation, surp√¢turage, s√©cheresse prolong√©e ou d√©gradation des sols.



### Tableau des valeurs r√©gionales du BAI

```{r bai-table, echo=FALSE}
df_global %>%
  filter(Indicateur == "BAI") %>%
  datatable(
    filter = "top",
    options = list(
      pageLength = 10,
      dom = 't<"bottom"ip>',
      className = "stripe hover cell-border order-column",
      autoWidth = TRUE
    ),
    rownames = FALSE,
    colnames = c("Pays", "R√©gion", "Indicateur", "Valeur")
  ) %>%
  formatStyle(
    "Valeur",
    background = styleColorBar(range(df_global$Valeur[df_global$Indicateur == "BAI"], na.rm = TRUE), "tomato"),
    backgroundSize = "80% 60%",
    backgroundRepeat = "no-repeat",
    backgroundPosition = "center"
  )
```


### Analyse comparative du stress √©cologique

L‚Äôindice **BAI (Burned Area Index)** met en √©vidence les zones soumises √† une **d√©gradation v√©g√©tale avanc√©e**, qu‚Äôil s‚Äôagisse de zones br√ªl√©es, de sols nus, de v√©g√©tation en stress ou de perturbations √©cologiques diverses. Plus sa valeur est √©lev√©e, plus l‚Äôenvironnement est alt√©r√© ou vuln√©rable. Cet indice est donc un excellent proxy pour identifier les **zones √©cologiquement fragiles**, o√π la v√©g√©tation est d√©grad√©e ou menac√©e.


#### Lecture interne (intra-pays)

√Ä l‚Äôint√©rieur de chaque pays, on observe une **tendance g√©ographique nord-sud bien marqu√©e**, refl√©tant les gradients climatiques et les dynamiques d‚Äôusage des terres.

- Au **S√©n√©gal**, le stress √©cologique est **mod√©r√©** dans les r√©gions du centre-est, comme **Tambacounda** et **Matam**, mais il reste **faible dans le sud** plus humide, notamment dans les zones foresti√®res de **Ziguinchor**.

- Au **Burkina Faso**, les niveaux de BAI sont **√©lev√©s dans le Centre-Nord et la zone sah√©lienne**, o√π la pression anthropique est intense (p√¢turage, d√©forestation, agriculture extensive), tandis que les r√©gions du sud-ouest affichent des niveaux plus faibles.

- Au **Mali**, les r√©gions **sahariennes du nord** comme **Tombouctou** ou **Kidal** pr√©sentent un **stress tr√®s √©lev√©**, tandis que le sud agricole (ex. **Sikasso**) conserve une couverture v√©g√©tale plus stable.

- Au **Niger**, le **stress est g√©n√©ralis√©** sur l‚Äôensemble du territoire. Des valeurs √©lev√©es sont notamment observ√©es √† l‚Äôest (**Diffa**) et dans les r√©gions d√©sertiques du nord (**Agadez**), traduisant une forte vuln√©rabilit√© √©cologique.

**Conclusion intra-pays** : dans tous les pays analys√©s, **plus on se dirige vers le nord, plus le stress √©cologique augmente**. Ce ph√©nom√®ne s‚Äôexplique par une **r√©duction des pr√©cipitations**, une **aridit√© structurelle des sols**, et des **pressions humaines accrues** dans les zones sah√©liennes et d√©sertiques.

#### Lecture externe (inter-pays)

Sur le plan comparatif, les √©carts entre pays sont √©galement significatifs :

- Le **Niger** enregistre le **BAI moyen le plus √©lev√©**, ce qui refl√®te une **d√©gradation g√©n√©ralis√©e du couvert v√©g√©tal**, accentu√©e par des conditions climatiques extr√™mes et un contexte socio-environnemental fragile.

- Le **Mali** suit, avec un niveau de stress √©lev√©, notamment dans ses vastes zones arides du nord.

- Le **Burkina Faso** pr√©sente une situation **interm√©diaire**, marqu√©e par de fortes disparit√©s r√©gionales, entre un nord d√©grad√© et un sud plus r√©silient.

- Le **S√©n√©gal**, enfin, affiche un **stress v√©g√©tal relativement faible**, notamment gr√¢ce √† la **vitalit√© des √©cosyst√®mes du sud**, qui maintiennent une dynamique √©cologique plus stable.

---

## Comparaison de l‚Äôhumidit√© des surfaces 


L‚Äô**indice WI2 (Water Index 2)** est un indicateur spectral con√ßu pour mesurer la **pr√©sence d‚Äôeau ou d‚Äôhumidit√© dans les surfaces terrestres**, qu‚Äôil s‚Äôagisse de sols, de v√©g√©tation ou de plans d‚Äôeau peu profonds. Contrairement aux indices de v√©g√©tation, le WI2 **ne capte pas la vigueur des plantes**, mais plut√¥t leur **contenu en eau** ou la **teneur en humidit√© r√©siduelle du sol**.

Un WI2 faible traduit une **situation de s√©cheresse ou de faible disponibilit√© hydrique**, tandis qu‚Äôun WI2 √©lev√© indique une **humidit√© importante des surfaces**. Cet indice est donc essentiel pour d√©tecter les zones en **stress hydrique**, et comprendre les contrastes hydrologiques dans les pays sah√©liens.




### Moyenne des tableaux du WI2 par pays
```{r wi2-table, echo=FALSE, warning=FALSE}
df_global %>%
  filter(Indicateur == "WI2") %>%
  datatable(filter = "top", options = list(pageLength = 10)) %>%
  formatStyle(
    "Valeur",
    background = styleColorBar(range(df_global$Valeur, na.rm = TRUE), "lightblue"),
    backgroundSize = "80% 50%",
    backgroundRepeat = "no-repeat",
    backgroundPosition = "center"
  )
```
### Lecture interne (intra-pays)

√Ä l‚Äôint√©rieur de chaque pays, le WI2 r√©v√®le des **disparit√©s importantes entre les r√©gions**, largement conditionn√©es par les pr√©cipitations, le couvert v√©g√©tal, les sols et la topographie.

- Au **S√©n√©gal**, les r√©gions m√©ridionales comme **Ziguinchor** ou **S√©dhiou** pr√©sentent des WI2 nettement plus √©lev√©s, en lien avec la forte pluviom√©trie, la densit√© v√©g√©tale et la pr√©sence de zones humides (bolongs, rizi√®res). √Ä l‚Äôinverse, les r√©gions sah√©liennes du nord (Saint-Louis, Louga) affichent des niveaux d‚Äôhumidit√© faibles.

- Au **Burkina Faso**, une humidit√© relative est conserv√©e dans les r√©gions du **Sud-Ouest**, des **Cascades** et des **Hauts-Bassins**, tandis que le Centre-Nord et le Sahel sont beaucoup plus secs.

- Au **Mali**, on observe une structure similaire : **le sud (Sikasso, Koulikoro)** concentre l‚Äôessentiel de l‚Äôhumidit√© r√©siduelle, alors que les zones sahariennes (Tombouctou, Kidal) restent extr√™mement s√®ches, avec des WI2 tr√®s bas.

- Au **Niger**, l‚Äôhumidit√© est faible de mani√®re g√©n√©ralis√©e. Les **r√©gions de Maradi, Dosso ou Tillab√©ri** pr√©sentent des valeurs l√©g√®rement meilleures, mais le reste du territoire affiche une situation hydrique pr√©occupante, en particulier √† l‚Äôest (Diffa) et au nord d√©sertique (Agadez).

**Conclusion intra-pays** : dans tous les pays, l‚Äôhumidit√© des surfaces **d√©cro√Æt progressivement du sud vers le nord**, en lien direct avec la baisse des pr√©cipitations, la r√©duction du couvert v√©g√©tal et la structure climatique zonale.

---

### Lecture externe (inter-pays)

La comparaison des WI2 moyens entre pays permet d‚Äôidentifier les territoires les **plus expos√©s √† la s√©cheresse** :

- Le **Niger** est, sans surprise, le pays avec le **WI2 le plus faible**, confirmant son exposition structurelle √† l‚Äôaridit√© et sa tr√®s faible disponibilit√© en eau de surface.

- Le **Mali** et le **Burkina Faso** se situent dans une zone interm√©diaire, avec des contrastes marqu√©s selon les r√©gions, mais une vuln√©rabilit√© r√©elle au stress hydrique.

- Le **S√©n√©gal** pr√©sente le **WI2 moyen le plus √©lev√©**, gr√¢ce aux √©cosyst√®mes du sud qui conservent une humidit√© r√©siduelle importante, malgr√© un nord plus sec.

**Conclusion inter-pays** : parmi les pays analys√©s, le **S√©n√©gal b√©n√©ficie d‚Äôun avantage hydrique relatif**, tandis que le **Niger cumule faiblesse du couvert v√©g√©tal et d√©ficit hydrique**, faisant de lui le territoire le plus fragile sur le plan agro-hydrologique.








---

## Conclusion

Ce chapitre a permis de dresser un portrait comparatif des dynamiques environnementales dans quatre pays de la bande sah√©lienne ouest-africaine : S√©n√©gal, Burkina Faso, Mali et Niger. En mobilisant des indicateurs spectraux harmonis√©s (NDVI, BAI, WI2), nous avons mis en √©vidence les contrastes √©cologiques majeurs, tant √† l‚Äôint√©rieur de chaque pays qu‚Äôentre eux.

Sur le plan de la v√©g√©tation active (NDVI), le S√©n√©gal et le Burkina Faso apparaissent comme les territoires les plus dens√©ment v√©g√©talis√©s, notamment dans leurs r√©gions m√©ridionales. √Ä l‚Äôoppos√©, le Niger et le Mali, confront√©s √† une aridit√© plus prononc√©e, affichent une v√©g√©tation plus clairsem√©e, avec une pr√©dominance de zones semi-arides voire d√©sertiques au nord.

Concernant le stress √©cologique (BAI), les cartes et les valeurs moyennes r√©v√®lent une vuln√©rabilit√© croissante vers le nord dans tous les pays. Le Niger se distingue par une d√©gradation g√©n√©ralis√©e du sol et de la couverture v√©g√©tale, traduisant √† la fois les effets du climat et des pressions humaines. Le S√©n√©gal, en revanche, pr√©sente une meilleure r√©silience √©cologique, surtout dans ses zones humides du sud.

Enfin, l‚Äôanalyse de l‚Äôhumidit√© des surfaces (WI2) montre des gradients similaires. Le S√©n√©gal b√©n√©ficie d‚Äôun profil hydrique relativement favorable gr√¢ce √† ses zones fluviales et foresti√®res. Le Burkina Faso et le Mali pr√©sentent des contrastes internes forts, tandis que le Niger concentre les plus faibles niveaux d‚Äôhumidit√©, confirmant sa forte exposition au stress hydrique.



> *‚ÄúComparer les espaces, c‚Äôest comprendre les trajectoires. Et comprendre, c‚Äôest d√©j√† agir.‚Äù*

